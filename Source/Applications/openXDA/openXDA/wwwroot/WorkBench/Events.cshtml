@*******************************************************************************************************
//  Index.cshtml - Gbtc
//
//  Copyright © 2016, Grid Protection Alliance.  All Rights Reserved.
//
//  Licensed to the Grid Protection Alliance (GPA) under one or more contributor license agreements. See
//  the NOTICE file distributed with this work for additional information regarding copyright ownership.
//  The GPA licenses this file to you under the MIT License (MIT), the "License"; you may not use this
//  file except in compliance with the License. You may obtain a copy of the License at:
//
//      http://opensource.org/licenses/MIT
//
//  Unless agreed to in writing, the subject software distributed under the License is distributed on an
//  "AS-IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. Refer to the
//  License for the specific language governing permissions and limitations.
//
//  Code Modification History:
//  ----------------------------------------------------------------------------------------------------
//  01/15/2016 - J. Ritchie Carroll
//       Generated original version of source code.
//
//*****************************************************************************************************@
@using System
@using System.Threading
@using RazorEngine.Templating
@using GSF.Web
@using openXDA.Model
@using RazorEngine.Templating
@inherits TemplateBase<AppModel>
@{
    Layout = "Workbench/Layout.cshtml";
    ViewBag.Title = "Events";
}

@section StyleSheets{
<style>
    table, th, td {
        border: 1px solid grey;
        border-collapse: collapse;
        padding: 5px;
    }

    table tr:nth-child(odd) {
        background-color: #f1f1f1;
    }

    table tr:nth-child(even) {
        background-color: #ffffff;
    }
</style>
}
<div ng-app="eventsApp" ng-controller="eventsCtrl">
    <table>
        <tr>
            <th>Event ID</th>
            <th>Meter ID</th>
            <th>Line ID</th>
        </tr>
        <tr ng-repeat="x in events">
            <td>{{ x.ID }}</td>
            <td>{{ x.MeterID }}</td>
            <td>{{ x.LineID }}</td>
        </tr>
    </table>
</div>

@section Scripts {
    <script>
         var app = angular.module('eventsApp', []);
         app.controller('eventsCtrl', function ($scope) {
            $(window).one('hubConnected', function (event) {
                dataHub.getFilteredEvents(5, '1/14/2014', '10/7/2016', 'StartTime', true, 1, 50).done(function (data) {
                    $scope.events = data;
                });
            });
         });


    </script>
}
